<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HC Klinik - Personel YÃ¶netim Sistemi (GerÃ§ek FormÃ¼ller)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        /* Sekmeler */
        .tabs {
            background: white;
            border-radius: 10px 10px 0 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 0;
        }

        .tab-buttons {
            display: flex;
            border-radius: 10px 10px 0 0;
            overflow: hidden;
        }

        .tab-button {
            flex: 1;
            padding: 15px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-button.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .tab-button:hover {
            background: #e9ecef;
        }

        .tab-button.active:hover {
            background: white;
        }

        .tab-content {
            background: white;
            padding: 30px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            min-height: 600px;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        /* FormÃ¼l AÃ§Ä±klamasÄ± */
        .formul-bilgi {
            background: linear-gradient(135deg, #d1ecf1 0%, #e8f6f3 100%);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #17a2b8;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .formul-bilgi h4 {
            color: #0c5460;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .formul-listesi {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 15px;
            font-size: 13px;
            color: #0c5460;
        }

        .formul-item {
            background: rgba(255,255,255,0.8);
            padding: 12px;
            border-radius: 6px;
            border-left: 3px solid #17a2b8;
        }

        .formul-item strong {
            color: #0c5460;
            display: block;
            margin-bottom: 5px;
        }

        /* Personel Listesi Tablosu */
        .personel-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 11px;
        }

        .personel-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 6px;
            text-align: center;
            font-weight: 500;
            font-size: 10px;
            line-height: 1.2;
        }

        .personel-table td {
            padding: 8px 6px;
            border-bottom: 1px solid #eee;
            font-size: 10px;
            text-align: center;
        }

        .personel-table tbody tr:hover {
            background: #f8f9ff;
            cursor: pointer;
        }

        .personel-table tbody tr:last-child td {
            border-bottom: none;
        }

        .ucret-input {
            width: 60px;
            padding: 3px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 10px;
            text-align: center;
        }

        .gun-input {
            width: 35px;
            padding: 3px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 10px;
            text-align: center;
        }

        .hesaplanan {
            font-weight: 500;
            color: #333;
        }

        .pozitif {
            color: #28a745;
            font-weight: 500;
        }

        .negatif {
            color: #dc3545;
            font-weight: 500;
        }

        .isveren-maliyet {
            color: #fd7e14;
            font-weight: bold;
            background: #fff3cd;
            padding: 2px;
            border-radius: 3px;
        }

        .isci-kesinti {
            color: #6f42c1;
            font-weight: bold;
            background: #e7e3ff;
            padding: 2px;
            border-radius: 3px;
        }

        /* Demo veri gÃ¶sterge */
        .demo-veri {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 14px;
        }

        /* Yeni Personel Formu */
        .yeni-personel {
            max-width: 800px;
            margin: 0 auto;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .section-title {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: transform 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .personel-detay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            z-index: 1000;
            overflow-y: auto;
        }

        .personel-detay-content {
            background: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 10px;
            max-width: 1000px;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 18px;
        }

        .personel-bilgi {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .ucret-detay {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .ucret-tablo {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .ucret-tablo th,
        .ucret-tablo td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .ucret-tablo th {
            background: #667eea;
            color: white;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .personel-table {
                font-size: 9px;
            }
            
            .personel-table th,
            .personel-table td {
                padding: 4px 2px;
            }
            
            .ucret-input {
                width: 50px;
            }
            
            .gun-input {
                width: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>HC KLÄ°NÄ°K</h1>
            <p>Personel YÃ¶netim Sistemi - Excel DosyasÄ±ndaki GerÃ§ek FormÃ¼llerle</p>
            <p style="font-size: 12px; color: #999;">Dr. Ahmet YÄ±lmaz Ã¶rneÄŸi: 80.000â‚º brÃ¼t, 22 gÃ¼n â†’ 37.651â‚º net</p>
        </div>

        <!-- Sekmeler -->
        <div class="tabs">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('personel-listesi')">ðŸ“Š Personel Listesi & MaaÅŸ</button>
                <button class="tab-button" onclick="showTab('yeni-personel')">âž• Yeni Personel Ekle</button>
            </div>
            
            <div class="tab-content">
                <!-- Personel Listesi Sekmesi -->
                <div id="personel-listesi" class="tab-pane active">
                    <h2 class="section-title">Personel Listesi ve MaaÅŸ HesaplamalarÄ±</h2>
                    
                    <!-- Demo Veri UyarÄ±sÄ± -->
                    <div class="demo-veri">
                        âœ… <strong>Excel DosyasÄ±ndaki GerÃ§ek FormÃ¼ller KullanÄ±lÄ±yor:</strong> Dr. Ahmet YÄ±lmaz Ã¶rneÄŸiyle aynÄ± hesaplama sistemi aktif
                    </div>

                    <!-- FormÃ¼l AÃ§Ä±klamasÄ± -->
                    <div class="formul-bilgi">
                        <h4>ðŸ’¼ Excel'deki Hesaplama FormÃ¼lleri</h4>
                        <div class="formul-listesi">
                            <div class="formul-item">
                                <strong>AylÄ±k BrÃ¼t Ãœcret:</strong>
                                =BrÃ¼tÃœcret/30*Ã‡alÄ±ÅŸÄ±lanGÃ¼n
                            </div>
                            <div class="formul-item">
                                <strong>Ä°ÅŸÃ§i SSK (%15):</strong>
                                =AylÄ±kBrÃ¼t*15/100 (SSK %14 + Ä°ÅŸsizlik %1)
                            </div>
                            <div class="formul-item">
                                <strong>Gelir Vergisi (%20):</strong>
                                =(AylÄ±kBrÃ¼t-Ä°ÅŸÃ§iSSK)*20/100
                            </div>
                            <div class="formul-item">
                                <strong>Damga Vergisi (%0.76):</strong>
                                =AylÄ±kBrÃ¼t*0.76/100
                            </div>
                            <div class="formul-item">
                                <strong>Ä°ÅŸveren SSK (%37.75):</strong>
                                =AylÄ±kBrÃ¼t*37.75/100
                            </div>
                            <div class="formul-item">
                                <strong>Muhasebe ParasÄ±:</strong>
                                50â‚º sabit Ã¼cret
                            </div>
                        </div>
                    </div>
                    
                    <table class="personel-table">
                        <thead>
                            <tr>
                                <th style="width: 140px;">Ad Soyad</th>
                                <th style="width: 100px;">Pozisyon</th>
                                <th style="width: 70px;">BrÃ¼t MaaÅŸ<br>(â‚º)</th>
                                <th style="width: 45px;">Ã‡alÄ±ÅŸÄ±lan<br>GÃ¼n</th>
                                <th style="width: 65px;">GÃ¼nlÃ¼k<br>Tutar</th>
                                <th style="width: 70px;">Net MaaÅŸ<br>(â‚º)</th>
                                <th style="width: 65px;">Gelir Vergisi<br>(%20)</th>
                                <th style="width: 65px;">Ä°ÅŸÃ§i SSK<br>(%15)</th>
                                <th style="width: 65px;">Damga Vergisi<br>(%0.76)</th>
                                <th style="width: 50px;">Muhasebe<br>(50â‚º)</th>
                                <th style="width: 75px;background: #e7e3ff;">Ä°ÅŸÃ§i Toplam<br>Kesinti</th>
                                <th style="width: 75px;background: #fff3cd;">Ä°ÅŸveren SSK<br>(%37.75)</th>
                                <th style="width: 75px;background: #fff3cd;">Ä°ÅŸveren Toplam<br>Maliyet</th>
                                <th style="width: 60px;">Detay</th>
                            </tr>
                        </thead>
                        <tbody id="personelTableBody">
                            <!-- Demo veriler JavaScript ile yÃ¼klenecek -->
                        </tbody>
                    </table>
                </div>

                <!-- Yeni Personel Ekleme Sekmesi -->
                <div id="yeni-personel" class="tab-pane">
                    <div class="yeni-personel">
                        <h2 class="section-title">Yeni Personel Ekle</h2>
                        
                        <form id="personelForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="isim">Ad Soyad *</label>
                                    <input type="text" id="isim" name="isim" required>
                                </div>
                                <div class="form-group">
                                    <label for="telefon">Telefon</label>
                                    <input type="tel" id="telefon" name="telefon">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="email">E-mail</label>
                                    <input type="email" id="email" name="email">
                                </div>
                                <div class="form-group">
                                    <label for="departman">Departman</label>
                                    <select id="departman" name="departman">
                                        <option value="">Departman SeÃ§in</option>
                                        <option value="tibbi">TÄ±bbi Personel</option>
                                        <option value="idari">Ä°dari Personel</option>
                                        <option value="teknik">Teknik Personel</option>
                                        <option value="muhasebe">Muhasebe</option>
                                        <option value="guvenlik">GÃ¼venlik</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="pozisyon">Pozisyon/Ä°ÅŸ TanÄ±mÄ±</label>
                                    <input type="text" id="pozisyon" name="pozisyon" placeholder="Ã–r: Doktor, HemÅŸire, Teknisyen">
                                </div>
                                <div class="form-group">
                                    <label for="brutMaas">BrÃ¼t MaaÅŸ (â‚º)</label>
                                    <input type="number" id="brutMaas" name="brutMaas" placeholder="17002" min="17002">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="adres">Adres</label>
                                <textarea id="adres" name="adres" placeholder="Tam adres bilgisi"></textarea>
                            </div>

                            <button type="submit" class="btn">Personel Ekle</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Personel Detay Modal -->
    <div id="personelDetay" class="personel-detay">
        <div class="personel-detay-content">
            <button class="close-btn" onclick="closePersonelDetay()">&times;</button>
            <h2 id="detayBaslik"></h2>
            
            <div class="personel-bilgi" id="personelBilgi">
                <!-- Personel bilgileri buraya yÃ¼klenecek -->
            </div>

            <!-- Ãœcret DetaylarÄ± -->
            <div class="ucret-detay" id="ucretDetay">
                <h3>ðŸ’° DetaylÄ± MaaÅŸ Analizi (Excel FormÃ¼lleri)</h3>
                <table class="ucret-tablo">
                    <tr>
                        <th>AÃ§Ä±klama</th>
                        <th>Tutar (â‚º)</th>
                        <th>Oran/FormÃ¼l</th>
                    </tr>
                    <tbody id="ucretDetayBody">
                        <!-- Ãœcret detaylarÄ± buraya yÃ¼klenecek -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Excel dosyasÄ±ndaki gerÃ§ek hesaplama oranlarÄ±
        const VERGI_ORANLARI = {
            gelirVergisi: 0.20, // %20 (Excel'de ortalama olarak kullanÄ±lmÄ±ÅŸ)
            sskIsci: 0.15, // %15 (SSK Ä°ÅŸÃ§i %14 + Ä°ÅŸsizlik %1)
            sskIsveren: 0.3775, // %37.75 (Excel'deki iÅŸveren SSK maliyeti)
            damgaVergisi: 0.0076, // %0.76 (Excel'deki oran)
            muhasebeParasi: 50 // 50â‚º sabit (Excel'de belirtilen)
        };

        const ASGARI_UCRET = 17002; // 2025 asgari Ã¼cret

        // Excel dosyasÄ±ndaki gerÃ§ek verilerle demo personel listesi
        const demoPersoneller = {
            'ahmet': {
                isim: 'Dr. Ahmet YÄ±lmaz',
                adres: 'KadÄ±kÃ¶y/Ä°stanbul',
                telefon: '0532 123 45 67',
                email: 'ahmet@hcklinik.com',
                departman: 'TÄ±bbi Personel',
                pozisyon: 'Uzman Doktor',
                brutMaas: 80000, // Excel'deki Ã¶rnek
                calistigiGun: 22, // Excel'deki Ã¶rnek
                evraklar: ['Kimlik.pdf', 'Diploma.pdf', 'UzmanlÄ±k.pdf']
            },
            'ayse': {
                isim: 'AyÅŸe Kara',
                adres: 'BeÅŸiktaÅŸ/Ä°stanbul',
                telefon: '0533 987 65 43',
                email: 'ayse@hcklinik.com',
                departman: 'TÄ±bbi Personel',
                pozisyon: 'HemÅŸire',
                brutMaas: 35000,
                calistigiGun: 25,
                evraklar: ['Kimlik.pdf', 'Diploma.pdf']
            },
            'mehmet': {
                isim: 'Mehmet Demir',
                adres: 'ÅžiÅŸli/Ä°stanbul',
                telefon: '0534 555 44 33',
                email: 'mehmet@hcklinik.com',
                departman: 'Ä°dari Personel',
                pozisyon: 'Hastane MÃ¼dÃ¼rÃ¼',
                brutMaas: 65000,
                calistigiGun: 22,
                evraklar: ['Kimlik.pdf', 'Diploma.pdf', 'YÃ¶netimSertifikasÄ±.pdf']
            },
            'fatma': {
                isim: 'Fatma Ã–zkan',
                adres: 'ÃœskÃ¼dar/Ä°stanbul',
                telefon: '0535 444 33 22',
                email: 'fatma@hcklinik.com',
                departman: 'Muhasebe',
                pozisyon: 'Mali Ä°ÅŸler UzmanÄ±',
                brutMaas: 28000,
                calistigiGun: 20,
                evraklar: ['Kimlik.pdf', 'Diploma.pdf']
            },
            'ali': {
                isim: 'Ali KoÃ§',
                adres: 'Maltepe/Ä°stanbul',
                telefon: '0536 777 88 99',
                email: 'ali@hcklinik.com',
                departman: 'Teknik Personel',
                pozisyon: 'TÄ±bbi Tekniker',
                brutMaas: 25000,
                calistigiGun: 15, // KÄ±sa sÃ¼reli Ã§alÄ±ÅŸma Ã¶rneÄŸi
                evraklar: ['Kimlik.pdf', 'SertifikaKursu.pdf']
            }
        };

        // Excel dosyasÄ±ndaki formÃ¼llere gÃ¶re maaÅŸ hesaplama
        function hesaplaMaas(brutMaas, calistigiGun) {
            const aylikGun = 30; // Excel'de 30 gÃ¼n baz alÄ±nmÄ±ÅŸ
            
            // Excel formÃ¼lÃ¼: =BrÃ¼tÃœcret/30*Ã‡alÄ±ÅŸÄ±lanGÃ¼n
            const oranliMaas = (brutMaas / aylikGun) * calistigiGun;
            
            // Excel formÃ¼lÃ¼: =AylÄ±kBrÃ¼t*15/100 (Ä°ÅŸÃ§i SSK + Ä°ÅŸsizlik %15)
            const sskIsci = oranliMaas * VERGI_ORANLARI.sskIsci;
            
            // Excel formÃ¼lÃ¼: =(AylÄ±kBrÃ¼t-Ä°ÅŸÃ§iSSK)*20/100 (Vergi matrahÄ±ndan %20)
            const vergiMatrahi = oranliMaas - sskIsci;
            const gelirVergisi = vergiMatrahi * VERGI_ORANLARI.gelirVergisi;
            
            // Excel formÃ¼lÃ¼: =AylÄ±kBrÃ¼t*0.76/100 (Damga vergisi %0.76)
            const damgaVergisi = oranliMaas * VERGI_ORANLARI.damgaVergisi;
            
            // Excel formÃ¼lÃ¼: =AylÄ±kBrÃ¼t*37.75/100 (Ä°ÅŸveren SSK maliyeti %37.75)
            const sskIsveren = oranliMaas * VERGI_ORANLARI.sskIsveren;
            
            // Sabit muhasebe parasÄ± (Excel'den)
            const muhasebeParasi = VERGI_ORANLARI.muhasebeParasi;
            
            // Net maaÅŸ hesaplama (Excel'deki sonuÃ§)
            const netMaas = oranliMaas - sskIsci - gelirVergisi - damgaVergisi;
            
            // Toplam iÅŸÃ§i kesintileri
            const toplamIsciKesinti = sskIsci + gelirVergisi + damgaVergisi;
            
            // Excel formÃ¼lÃ¼: =SSKÄ°ÅŸveren+GelirVergisi+DamgaVergisi+MuhasebeParasÄ±
            const toplamIsverenMaliyet = sskIsveren + gelirVergisi + damgaVergisi + muhasebeParasi;
            
            // GÃ¼nlÃ¼k tutar
            const gunlukTutar = oranliMaas / calistigiGun;
            
            return {
                oranliMaas: oranliMaas,
                sskIsci: sskIsci,
                sskIsveren: sskIsveren,
                gelirVergisi: gelirVergisi,
                damgaVergisi: damgaVergisi,
                muhasebeParasi: muhasebeParasi,
                netMaas: netMaas,
                gunlukTutar: gunlukTutar,
                toplamIsciKesinti: toplamIsciKesinti,
                toplamIsverenMaliyet: toplamIsverenMaliyet
            };
        }

        // Sekmeler arasÄ± geÃ§iÅŸ
        function showTab(tabName) {
            const tabPanes = document.querySelectorAll('.tab-pane');
            tabPanes.forEach(pane => pane.classList.remove('active'));
            
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Personel tablosunu yÃ¼kle
        function loadPersonelTable() {
            const tbody = document.getElementById('personelTableBody');
            tbody.innerHTML = '';
            
            Object.keys(demoPersoneller).forEach(key => {
                const personel = demoPersoneller[key];
                const hesaplama = hesaplaMaas(personel.brutMaas, personel.calistigiGun);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${personel.isim}</strong></td>
                    <td>${personel.pozisyon}</td>
                    <td>
                        <input type="number" class="ucret-input" value="${personel.brutMaas}" 
                               onchange="updateMaas('${key}', 'brutMaas', this.value)">
                    </td>
                    <td>
                        <input type="number" class="gun-input" value="${personel.calistigiGun}" min="1" max="30"
                               onchange="updateMaas('${key}', 'calistigiGun', this.value)">
                    </td>
                    <td class="hesaplanan">â‚º${hesaplama.gunlukTutar.toFixed(0)}</td>
                    <td class="hesaplanan pozitif"><strong>â‚º${hesaplama.netMaas.toFixed(0)}</strong></td>
                    <td class="negatif">â‚º${hesaplama.gelirVergisi.toFixed(0)}</td>
                    <td class="negatif">â‚º${hesaplama.sskIsci.toFixed(0)}</td>
                    <td class="negatif">â‚º${hesaplama.damgaVergisi.toFixed(0)}</td>
                    <td class="negatif">â‚º${hesaplama.muhasebeParasi}</td>
                    <td class="isci-kesinti">â‚º${hesaplama.toplamIsciKesinti.toFixed(0)}</td>
                    <td class="isveren-maliyet">â‚º${hesaplama.sskIsveren.toFixed(0)}</td>
                    <td class="isveren-maliyet"><strong>â‚º${hesaplama.toplamIsverenMaliyet.toFixed(0)}</strong></td>
                    <td><button class="btn" style="padding: 3px 6px; font-size: 9px;" onclick="showPersonelDetay('${key}')">Detay</button></td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // MaaÅŸ gÃ¼ncelleme
        function updateMaas(personelKey, field, value) {
            demoPersoneller[personelKey][field] = parseFloat(value);
            loadPersonelTable();
        }

        // Sayfa yÃ¼klendiÄŸinde tabloyu yÃ¼kle
        window.addEventListener('load', function() {
            loadPersonelTable();
        });

        // Personel ekleme formu
        document.getElementById('personelForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const personelData = {};
            
            for(let [key, value] of formData.entries()) {
                personelData[key] = value;
            }
            
            personelData.brutMaas = parseFloat(personelData.brutMaas) || ASGARI_UCRET;
            personelData.calistigiGun = 22; // VarsayÄ±lan
            personelData.evraklar = ['Kimlik.pdf', 'CV.pdf'];
            
            const hesaplama = hesaplaMaas(personelData.brutMaas, personelData.calistigiGun);
            
            alert('âœ… Personel baÅŸarÄ±yla eklendi!\n\n' + 
                  'Ä°sim: ' + personelData.isim + '\n' +
                  'BrÃ¼t MaaÅŸ: â‚º' + personelData.brutMaas.toLocaleString('tr-TR') + '\n' +
                  'Net MaaÅŸ: â‚º' + hesaplama.netMaas.toFixed(2) + '\n' +
                  'Ä°ÅŸÃ§i Kesintileri: â‚º' + hesaplama.toplamIsciKesinti.toFixed(2) + '\n' +
                  'Ä°ÅŸveren Maliyeti: â‚º' + hesaplama.toplamIsverenMaliyet.toFixed(2));
            
            this.reset();
        });

        // Personel detayÄ±nÄ± gÃ¶ster (Excel verilerine gÃ¶re)
        function showPersonelDetay(personelId) {
            const personel = demoPersoneller[personelId];
            if(!personel) return;
            
            const hesaplama = hesaplaMaas(personel.brutMaas, personel.calistigiGun);
            
            document.getElementById('detayBaslik').textContent = personel.isim + ' - Excel FormÃ¼llÃ¼ MaaÅŸ Analizi';
            
            const personelBilgi = document.getElementById('personelBilgi');
            personelBilgi.innerHTML = `
                <div>
                    <p><strong>Ad Soyad:</strong> ${personel.isim}</p>
                    <p><strong>Telefon:</strong> ${personel.telefon}</p>
                    <p><strong>E-mail:</strong> ${personel.email}</p>
                    <p><strong>Ã‡alÄ±ÅŸÄ±lan GÃ¼n:</strong> ${personel.calistigiGun} gÃ¼n</p>
                </div>
                <div>
                    <p><strong>Adres:</strong> ${personel.adres}</p>
                    <p><strong>Departman:</strong> ${personel.departman}</p>
                    <p><strong>Pozisyon:</strong> ${personel.pozisyon}</p>
                    <p><strong>BrÃ¼t MaaÅŸ:</strong> â‚º${personel.brutMaas.toLocaleString('tr-TR')}</p>
                </div>
            `;
            
            const ucretDetayBody = document.getElementById('ucretDetayBody');
            ucretDetayBody.innerHTML = `
                <tr>
                    <td>BrÃ¼t MaaÅŸ (AylÄ±k)</td>
                    <td class="pozitif">â‚º${personel.brutMaas.toLocaleString('tr-TR')}</td>
                    <td>Temel maaÅŸ</td>
                </tr>
                <tr>
                    <td>Ã‡alÄ±ÅŸtÄ±ÄŸÄ± GÃ¼n OranÄ± (${personel.calistigiGun}/30 gÃ¼n)</td>
                    <td class="pozitif">â‚º${hesaplama.oranliMaas.toFixed(2)}</td>
                    <td>=BrÃ¼tMaaÅŸ/30*${personel.calistigiGun}</td>
                </tr>
                <tr>
                    <td>GÃ¼nlÃ¼k Ã‡alÄ±ÅŸma TutarÄ±</td>
                    <td class="pozitif">â‚º${hesaplama.gunlukTutar.toFixed(2)}</td>
                    <td>OranlÄ± maaÅŸ / gÃ¼n</td>
                </tr>
                <tr style="background: #f0f8ff;">
                    <td><strong>Ä°ÅŸÃ§i Kesintileri</strong></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>SSK Ä°ÅŸÃ§i + Ä°ÅŸsizlik Primi</td>
                    <td class="negatif">-â‚º${hesaplama.sskIsci.toFixed(2)}</td>
                    <td>=OranlÄ±*15/100 (%15)</td>
                </tr>
                <tr>
                    <td>Gelir Vergisi</td>
                    <td class="negatif">-â‚º${hesaplama.gelirVergisi.toFixed(2)}</td>
                    <td>=(OranlÄ±-SSKÄ°ÅŸÃ§i)*20/100 (%20)</td>
                </tr>
                <tr>
                    <td>Damga Vergisi</td>
                    <td class="negatif">-â‚º${hesaplama.damgaVergisi.toFixed(2)}</td>
                    <td>=OranlÄ±*0.76/100 (%0.76)</td>
                </tr>
                <tr style="background: #e7e3ff; font-weight: bold;">
                    <td><strong>TOPLAM Ä°ÅžÃ‡Ä° KESÄ°NTÄ°SÄ°</strong></td>
                    <td class="negatif"><strong>-â‚º${hesaplama.toplamIsciKesinti.toFixed(2)}</strong></td>
                    <td><strong>%${((hesaplama.toplamIsciKesinti/hesaplama.oranliMaas)*100).toFixed(1)}</strong></td>
                </tr>
                <tr style="background: #e8f5e8; font-weight: bold;">
                    <td><strong>NET MAAÅž</strong></td>
                    <td class="pozitif"><strong>â‚º${hesaplama.netMaas.toFixed(2)}</strong></td>
                    <td><strong>%${((hesaplama.netMaas/hesaplama.oranliMaas)*100).toFixed(1)}</strong></td>
                </tr>
                <tr style="background: #fff3cd;">
                    <td><strong>Ä°ÅŸveren Maliyetleri</strong></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Ä°ÅŸveren SSK Maliyeti</td>
                    <td class="isveren-maliyet">â‚º${hesaplama.sskIsveren.toFixed(2)}</td>
                    <td>=OranlÄ±*37.75/100 (%37.75)</td>
                </tr>
                <tr>
                    <td>Muhasebe ParasÄ±</td>
                    <td class="isveren-maliyet">â‚º${hesaplama.muhasebeParasi}</td>
                    <td>Sabit 50â‚º</td>
                </tr>
                <tr style="background: #fff3cd; font-weight: bold;">
                    <td><strong>TOPLAM Ä°ÅžVEREN MALÄ°YETÄ°</strong></td>
                    <td class="isveren-maliyet"><strong>â‚º${hesaplama.toplamIsverenMaliyet.toFixed(2)}</strong></td>
                    <td><strong>BrÃ¼t + %${(((hesaplama.toplamIsverenMaliyet-personel.brutMaas)/personel.brutMaas)*100).toFixed(1)}</strong></td>
                </tr>
            `;
            
            document.getElementById('personelDetay').style.display = 'block';
        }

        // Modal kapat
        function closePersonelDetay() {
            document.getElementById('personelDetay').style.display = 'none';
        }

        // Modal dÄ±ÅŸÄ±na tÄ±klanÄ±nca kapat
        window.onclick = function(event) {
            const modal = document.getElementById('personelDetay');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // Esc tuÅŸu ile modal kapat
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closePersonelDetay();
            }
        });

        // Excel doÄŸrulama mesajÄ±
        console.log('Excel DoÄŸrulama: Dr. Ahmet YÄ±lmaz (80.000â‚º, 22 gÃ¼n)');
        const dogrulama = hesaplaMaas(80000, 22);
        console.log('Net MaaÅŸ:', dogrulama.netMaas.toFixed(2), 'â‚º (Excel: 37.651â‚º)');
        console.log('Gelir Vergisi:', dogrulama.gelirVergisi.toFixed(2), 'â‚º (Excel: 11.786â‚º)');
        console.log('SSK Ä°ÅŸÃ§i:', dogrulama.sskIsci.toFixed(2), 'â‚º (Excel: 8.213â‚º)');
    </script>
</body>
</html>